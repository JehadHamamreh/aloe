\hypertarget{pipeline_8h}{\section{/home/ismael/aloe\-\_\-ws/aloe\-\_\-git/rtdal\-\_\-lnx/src/pipeline.h File Reference}
\label{pipeline_8h}\index{/home/ismael/aloe\-\_\-ws/aloe\-\_\-git/rtdal\-\_\-lnx/src/pipeline.\-h@{/home/ismael/aloe\-\_\-ws/aloe\-\_\-git/rtdal\-\_\-lnx/src/pipeline.\-h}}
}
{\ttfamily \#include $<$signal.\-h$>$}\\*
{\ttfamily \#include \char`\"{}objects\-\_\-max.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}rtdal\-\_\-process.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}rtdal\-\_\-timer.\-h\char`\"{}}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structpipeline__t}{pipeline\-\_\-t}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{pipeline_8h_ac3f5ae786ea023082d01a5d0d9503908}{P\-R\-I\-N\-T\-\_\-\-T\-I\-M\-E}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{pipeline_8h_aa9b233cb90be7c46fe70942a92cc48a3}{pipeline\-\_\-run\-\_\-from\-\_\-timer} (void $\ast$arg, struct timespec $\ast$time)
\item 
void \hyperlink{pipeline_8h_adacbb7e165cf559489ff53309ed54bc6}{pipeline\-\_\-sync\-\_\-threads} ()
\item 
void \hyperlink{pipeline_8h_a644d25013c5885243e33edd9e7c61678}{pipeline\-\_\-initialize} (int \-\_\-num\-\_\-pipelines)
\item 
void $\ast$ \hyperlink{pipeline_8h_ac6bf4328375c6a9af588a208e692a02e}{pipeline\-\_\-run\-\_\-thread} (void $\ast$obj)
\item 
int \hyperlink{pipeline_8h_aaa0d27030e4683b82ffe9d5651b5c97c}{pipeline\-\_\-recover\-\_\-thread} (\hyperlink{structpipeline__t}{pipeline\-\_\-t} $\ast$obj)
\begin{DoxyCompactList}\small\item\em Called from the sigwait kernel thread after a pipeline thread has died. Set the process that caused the fault as non-\/runnable and create a new pipeline thread. \end{DoxyCompactList}\item 
int \hyperlink{pipeline_8h_a02037b265fa3ed27bf0a7d75d7813292}{pipeline\-\_\-rt\-\_\-fault} (\hyperlink{structpipeline__t}{pipeline\-\_\-t} $\ast$obj)
\begin{DoxyCompactList}\small\item\em Called when there is an rtfault in the pipeline. \end{DoxyCompactList}\item 
int \hyperlink{pipeline_8h_a615ac86c6cff54ffa2edb1bf1606729c}{pipeline\-\_\-add} (\hyperlink{structpipeline__t}{pipeline\-\_\-t} $\ast$obj, \hyperlink{rtdal__process_8h_aae6bdd48dcdbb9e74bbfb3dd6cd72b2a}{rtdal\-\_\-process\-\_\-t} $\ast$process)
\item 
int \hyperlink{pipeline_8h_ae95c1483a8fa6f94477e280a52fdfe78}{pipeline\-\_\-remove} (\hyperlink{structpipeline__t}{pipeline\-\_\-t} $\ast$obj, \hyperlink{rtdal__process_8h_aae6bdd48dcdbb9e74bbfb3dd6cd72b2a}{rtdal\-\_\-process\-\_\-t} $\ast$proc)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{pipeline_8h_ac3f5ae786ea023082d01a5d0d9503908}{\index{pipeline.\-h@{pipeline.\-h}!P\-R\-I\-N\-T\-\_\-\-T\-I\-M\-E@{P\-R\-I\-N\-T\-\_\-\-T\-I\-M\-E}}
\index{P\-R\-I\-N\-T\-\_\-\-T\-I\-M\-E@{P\-R\-I\-N\-T\-\_\-\-T\-I\-M\-E}!pipeline.h@{pipeline.\-h}}
\subsubsection[{P\-R\-I\-N\-T\-\_\-\-T\-I\-M\-E}]{\setlength{\rightskip}{0pt plus 5cm}\#define P\-R\-I\-N\-T\-\_\-\-T\-I\-M\-E}}\label{pipeline_8h_ac3f5ae786ea023082d01a5d0d9503908}


Definition at line 27 of file pipeline.\-h.



\subsection{Function Documentation}
\hypertarget{pipeline_8h_a615ac86c6cff54ffa2edb1bf1606729c}{\index{pipeline.\-h@{pipeline.\-h}!pipeline\-\_\-add@{pipeline\-\_\-add}}
\index{pipeline\-\_\-add@{pipeline\-\_\-add}!pipeline.h@{pipeline.\-h}}
\subsubsection[{pipeline\-\_\-add}]{\setlength{\rightskip}{0pt plus 5cm}int pipeline\-\_\-add (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\-\_\-t} $\ast$}]{obj, }
\item[{{\bf rtdal\-\_\-process\-\_\-t} $\ast$}]{process}
\end{DoxyParamCaption}
)}}\label{pipeline_8h_a615ac86c6cff54ffa2edb1bf1606729c}
Adds a process to the pipeline. It is inserted in the position min(n,exec\-\_\-position) where n is the number of elements in the spscq and exec\-\_\-position is defined in the process attributes used in the call to \hyperlink{group__process_gaac39f57d3d63eca01423a7ffd95026e1}{rtdal\-\_\-process\-\_\-new()}. Returns the position it has finally been inserted.


\begin{DoxyParams}{Parameters}
{\em obj} & Pointer to the \hyperlink{structpipeline__t}{pipeline\-\_\-t} object where the process is inserted  process pointer to the rtdal\-\_\-process\-\_\-t object to insert. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
non-\/negative integer number indicating the position it has been inserted, or -\/1 on error. 
\end{DoxyReturn}


Definition at line 236 of file pipeline.\-c.



References \-\_\-rtdal\-\_\-process\-\_\-t\-::attributes, rtdal\-\_\-process\-\_\-attr\-::exec\-\_\-position, pipeline\-\_\-t\-::first\-\_\-process, hdebug, pipeline\-\_\-t\-::id, \-\_\-rtdal\-\_\-process\-\_\-t\-::next, pipeline\-\_\-t\-::nof\-\_\-processes, \-\_\-rtdal\-\_\-process\-\_\-t\-::pid, \-\_\-rtdal\-\_\-process\-\_\-t\-::pipeline, and R\-T\-D\-A\-L\-\_\-\-A\-S\-S\-E\-R\-T\-\_\-\-P\-A\-R\-A\-M.



Referenced by rtdal\-\_\-process\-\_\-new().

\hypertarget{pipeline_8h_a644d25013c5885243e33edd9e7c61678}{\index{pipeline.\-h@{pipeline.\-h}!pipeline\-\_\-initialize@{pipeline\-\_\-initialize}}
\index{pipeline\-\_\-initialize@{pipeline\-\_\-initialize}!pipeline.h@{pipeline.\-h}}
\subsubsection[{pipeline\-\_\-initialize}]{\setlength{\rightskip}{0pt plus 5cm}void pipeline\-\_\-initialize (
\begin{DoxyParamCaption}
\item[{int}]{\-\_\-num\-\_\-pipelines}
\end{DoxyParamCaption}
)}}\label{pipeline_8h_a644d25013c5885243e33edd9e7c61678}


Definition at line 41 of file pipeline.\-c.



References hdebug, and pipeline\-\_\-sync\-\_\-initialize\-\_\-.

\hypertarget{pipeline_8h_aaa0d27030e4683b82ffe9d5651b5c97c}{\index{pipeline.\-h@{pipeline.\-h}!pipeline\-\_\-recover\-\_\-thread@{pipeline\-\_\-recover\-\_\-thread}}
\index{pipeline\-\_\-recover\-\_\-thread@{pipeline\-\_\-recover\-\_\-thread}!pipeline.h@{pipeline.\-h}}
\subsubsection[{pipeline\-\_\-recover\-\_\-thread}]{\setlength{\rightskip}{0pt plus 5cm}int pipeline\-\_\-recover\-\_\-thread (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\-\_\-t} $\ast$}]{obj}
\end{DoxyParamCaption}
)}}\label{pipeline_8h_aaa0d27030e4683b82ffe9d5651b5c97c}


Called from the sigwait kernel thread after a pipeline thread has died. Set the process that caused the fault as non-\/runnable and create a new pipeline thread. 



Definition at line 186 of file pipeline.\-c.



References aerror, pipeline\-\_\-t\-::finished, hdebug, pipeline\-\_\-t\-::id, kernel\-\_\-initialize\-\_\-create\-\_\-pipeline(), rtdal\-\_\-process\-\_\-seterror(), pipeline\-\_\-t\-::running\-\_\-process, and S\-I\-G\-\_\-\-R\-E\-C\-V.

\hypertarget{pipeline_8h_ae95c1483a8fa6f94477e280a52fdfe78}{\index{pipeline.\-h@{pipeline.\-h}!pipeline\-\_\-remove@{pipeline\-\_\-remove}}
\index{pipeline\-\_\-remove@{pipeline\-\_\-remove}!pipeline.h@{pipeline.\-h}}
\subsubsection[{pipeline\-\_\-remove}]{\setlength{\rightskip}{0pt plus 5cm}int pipeline\-\_\-remove (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\-\_\-t} $\ast$}]{obj, }
\item[{{\bf rtdal\-\_\-process\-\_\-t} $\ast$}]{proc}
\end{DoxyParamCaption}
)}}\label{pipeline_8h_ae95c1483a8fa6f94477e280a52fdfe78}
Removes the process proc from the pipeline pointed by obj. 
\begin{DoxyParams}{Parameters}
{\em obj} & Pointer to the pipeline object \\
\hline
{\em proc} & Pointer to the process to remove \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Zero on success, -\/1 on error 
\end{DoxyReturn}


Definition at line 286 of file pipeline.\-c.



References \-\_\-rtdal\-\_\-process\-\_\-t\-::attributes, rtdal\-\_\-process\-\_\-attr\-::exec\-\_\-position, pipeline\-\_\-t\-::first\-\_\-process, hdebug, pipeline\-\_\-t\-::id, \-\_\-rtdal\-\_\-process\-\_\-t\-::next, pipeline\-\_\-t\-::nof\-\_\-processes, \-\_\-rtdal\-\_\-process\-\_\-t\-::pid, R\-T\-D\-A\-L\-\_\-\-A\-S\-S\-E\-R\-T\-\_\-\-P\-A\-R\-A\-M, R\-T\-D\-A\-L\-\_\-\-E\-R\-R\-O\-R\-\_\-\-N\-O\-T\-F\-O\-U\-N\-D, and R\-T\-D\-A\-L\-\_\-\-S\-E\-T\-E\-R\-R\-O\-R.



Referenced by rtdal\-\_\-process\-\_\-new(), and rtdal\-\_\-process\-\_\-remove().

\hypertarget{pipeline_8h_a02037b265fa3ed27bf0a7d75d7813292}{\index{pipeline.\-h@{pipeline.\-h}!pipeline\-\_\-rt\-\_\-fault@{pipeline\-\_\-rt\-\_\-fault}}
\index{pipeline\-\_\-rt\-\_\-fault@{pipeline\-\_\-rt\-\_\-fault}!pipeline.h@{pipeline.\-h}}
\subsubsection[{pipeline\-\_\-rt\-\_\-fault}]{\setlength{\rightskip}{0pt plus 5cm}int pipeline\-\_\-rt\-\_\-fault (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\-\_\-t} $\ast$}]{obj}
\end{DoxyParamCaption}
)}}\label{pipeline_8h_a02037b265fa3ed27bf0a7d75d7813292}


Called when there is an rtfault in the pipeline. 



Definition at line 202 of file pipeline.\-c.



References aerror\-\_\-msg, pipeline\-\_\-t\-::finished, hdebug, pipeline\-\_\-t\-::id, pipeline\-\_\-t\-::nof\-\_\-processes, pipeline\-\_\-t\-::running\-\_\-process\-\_\-idx, pipeline\-\_\-t\-::thread, and pipeline\-\_\-t\-::ts\-\_\-counter.

\hypertarget{pipeline_8h_aa9b233cb90be7c46fe70942a92cc48a3}{\index{pipeline.\-h@{pipeline.\-h}!pipeline\-\_\-run\-\_\-from\-\_\-timer@{pipeline\-\_\-run\-\_\-from\-\_\-timer}}
\index{pipeline\-\_\-run\-\_\-from\-\_\-timer@{pipeline\-\_\-run\-\_\-from\-\_\-timer}!pipeline.h@{pipeline.\-h}}
\subsubsection[{pipeline\-\_\-run\-\_\-from\-\_\-timer}]{\setlength{\rightskip}{0pt plus 5cm}void pipeline\-\_\-run\-\_\-from\-\_\-timer (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{arg, }
\item[{struct timespec $\ast$}]{time}
\end{DoxyParamCaption}
)}}\label{pipeline_8h_aa9b233cb90be7c46fe70942a92cc48a3}


Definition at line 139 of file pipeline.\-c.



References hdebug, kernel\-\_\-tslot\-\_\-run(), rtdal\-\_\-time\-\_\-get(), rtdal\-\_\-time\-\_\-reset\-\_\-realtime(), and time\-\_\-t.



Referenced by kernel\-\_\-initialize\-\_\-create\-\_\-pipeline().

\hypertarget{pipeline_8h_ac6bf4328375c6a9af588a208e692a02e}{\index{pipeline.\-h@{pipeline.\-h}!pipeline\-\_\-run\-\_\-thread@{pipeline\-\_\-run\-\_\-thread}}
\index{pipeline\-\_\-run\-\_\-thread@{pipeline\-\_\-run\-\_\-thread}!pipeline.h@{pipeline.\-h}}
\subsubsection[{pipeline\-\_\-run\-\_\-thread}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ pipeline\-\_\-run\-\_\-thread (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{self}
\end{DoxyParamCaption}
)}}\label{pipeline_8h_ac6bf4328375c6a9af588a208e692a02e}
Runs one process after another (calling process\mbox{[}i\mbox{]}.run\-\_\-point()) and then sleeps waiting for the semaphore 

Definition at line 165 of file pipeline.\-c.



References hdebug, pipeline\-\_\-t\-::id, pipeline\-\_\-sync\-\_\-thread\-\_\-waits, and pipeline\-\_\-t\-::stop.



Referenced by kernel\-\_\-initialize\-\_\-create\-\_\-pipeline().

\hypertarget{pipeline_8h_adacbb7e165cf559489ff53309ed54bc6}{\index{pipeline.\-h@{pipeline.\-h}!pipeline\-\_\-sync\-\_\-threads@{pipeline\-\_\-sync\-\_\-threads}}
\index{pipeline\-\_\-sync\-\_\-threads@{pipeline\-\_\-sync\-\_\-threads}!pipeline.h@{pipeline.\-h}}
\subsubsection[{pipeline\-\_\-sync\-\_\-threads}]{\setlength{\rightskip}{0pt plus 5cm}void pipeline\-\_\-sync\-\_\-threads (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{pipeline_8h_adacbb7e165cf559489ff53309ed54bc6}


Definition at line 47 of file pipeline.\-c.



References pipeline\-\_\-sync\-\_\-threads\-\_\-wake.

